# Протокол TCP/IP, как работает интернет.

Каждый компьютер имеет **интернет-адрес** (IP - Internet Protocol Address). Каждое приложение, которое выходит в интернет, имеет свой **порт**, который оно "слушает" (указывается через ":"). IP + port = **Socket** -  Данные передаются **пакетами**. Так как запоминать IP с их портами неудобно, используется **DNS-сервер** (Domain Name System). К нему приходит запрос с названием сайта, он перенаправляет на нужный IP. Порт для DNS - **53**. Названия сайтов и соответствующие им адреса кэшируются. В первую очередь, интернет-провайдером.

Таким образом, когда вводим адрес сайта, происходит следующее:

1) Собирается пакет данных:
   * IP адрес компьютера с запросом;
   * информация о браузере;
   * запрашиваемая страница.

Браузер ищет соответствие запрашиваемого адреса (поиск его IP), если не находит - спрашивает у операционной системы (в файлах hosts), если нет и там, то пакет отправяется на DNS-сервер провайдера. Тот выдаёт IP (если в его базе нет, то он ищет у других DNS-серверов, пока не найдёт). 

2) Компьютер запроса устанавливает соединение с портом 80 запрашиваемого компьютера.
 
3) Если HTTPS, то производится TLS (Transport Layer Security) Handshake (клиент и сервер договариваются о ключе шифрования). 

4) Запрос на получение главной страницы (включает в себя заголовки, в т.ч. и Cookies).

5) Запрашиваемый компьютер принимает запрос, парсит его и пересылает страницу HTML (+ код ответа (200 и т.д.) + заголовки ответа).

6) Отрисовка страницы (см. https://scrymetto.github.io/howBrowsersWork/ )
